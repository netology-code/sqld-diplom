# Дипломная работа по профессии «SQL-разработчик»

* [Цель дипломной работы](#цель-дипломной-работы)
* [Чек-лист готовности к выполнению дипломной работы](#Чек-лист-готовности-к-выполнению-дипломной-работы)
* [Задание](#задание)
* [Замечания к заданию](#замечания-к-заданию) 
* [Этапы выполнения](#этапы-выполнения) 
* [Тестирование](#тестирование) 
* [Правила приёма дипломной работы](#правила-приёма-итоговой-работы)
* [Критерии оценки дипломной работы](#критерии-оценки-итоговой-работы)

### Цель дипломной работы

1. Научиться рассчитывать и создавать структуру БД.
2. Проработать логику разделения полномочий и прав доступа.
3. Настраивать соединение по сети, гарантирующее безопасность передающихся данных. 
4. Использовать различные подходы к тестированию БД для гарантии устойчивой работоспособности БД после изменений и дополнений в схеме.

------

### Чек-лист готовности к выполнению дипломной работы

1. Установлена PostgreSQL 15 версии.
2. Запущен экземпляр базы данных в режиме «чтение/запись».
3. СУБД настроена на приём только безопасных соединений от клиентов.

------

### Задание 

Федеральная сеть строительных магазинов решила создать интернет-магазин. Вас как SQL-разработчика привлекли для создания БД. Базу данных необходимо создать с нуля с учётом требований бизнеса и применением актуальных практик при развёртывании. 

Есть следующие бизнес-требования:

1. Предполагаемое количество заказов в сутки от 1 000 до 5 000 в разных городах. Количество зарегистрированных клиентов от 100 000 человек.
2. Не допускаются простои БД по любым причинам: падение серверов, обслуживание и т. п.
3. Необходимы регулярные бэкапы.
4. Предполагается, что с системой будут работатать разные категории пользователей для различных целей: сторонние сервисы, маркетологи, аналитики, SEO-специалисты. Нужно разграничить права доступа для каждой категории пользователей, соединение любых пользователей должно быть безопасным с использованием SSL.
5. Необходим механизм, который в определённые промежутки времени сможет формировать актуальный список товаров с ненулевым остатком в XML-формате и затем отправлять этот список по электронной почте определённым пользователям.
7. Нужно логирование всех SQL-операций, выполняющихся более 500 ms.
  
---

### Замечания к заданию

1. Установку и настройку СУБД делаем с нуля. То есть у нас есть машина под управлением ОС LINUX, например UBUNTU, и установку PostreSQL делаем сами.
3. Ресурс, куда будут складываться резервные копии, автоматом копируется в облако. Подразумевается, что он является надёжным хранилищем данных при любых аварийных сценариях.
4. Количественные значения, которые не даны по условию задачи, требуется додумать самостоятельно. Они могут помочь в создании модели системы, более подходящей к реалиям ситуации, исходя из ваших размышлений. Результирующие значения будут оцениваться исходя не из количества, а из логики размышления.
5. Структуру БД (состав и количество таблиц) требуется составить из логики, что БД должна содержать всю необходимую для функционарования интернет-магазина информацию, например:
   - сущность «Заказ» (шапка и позиции) — заказы пользователей;
   - товар — товары, необходимые для отображения каталога. Товар может иметь остатки, различные для каждого города, и т. п.
 
---

### Этапы выполнения

1. Провести анализ структуры БД и её объектов:
    - структура таблиц;
    - присутствие необходимых индексов и сиквенсов, если требуется;
    - определить хранимые процедуры и скрипты, если необходимо.
2. Определить необходимую минимальную конфигурацию отказоустойчивости:
    - конфигурация резервного копирования; 
    - минимально необходимая конфигурация экземпляра БД WAL-логирования — режим архивирования;
    - создать кластер как минимум из двух машин (мастер, слейв) и настроить репликацию и автоматическое переключение при падении мастера.
3. Рассчитать минимальный необходимый план доступов для команд потребителей ресурсов БД:
    - определиться, какие команды будут взаимодействовать с БД;
    - определиться, какие доступы нужны для команд;
    - рассчитать и создать необходимые роли доступов для команд;
    - создать необходимых пользователей с предоставлением им прав;
    - создать политику дефолтных прав доступа.
4. Предусмотреть настройку логирования событий чекпоинта, скорости выполнения запросов и команд в БД.

---

###  Тестирование

1. Выполнить тестирование создания резервной копии и восстановления БД с неё. База данных должна открыться как результат в режиме чтения и записи.
2. Проверить работу механизма логирования.
3. Проверить старт, остановку сервиса БД и доступность БД для работы как через локальный адрес 127.0.0.1, так и через внешний адрес сервера, доступный для подключения серверам приложения согласно разработанной вами модели подключения пользователей к БД — балансировщик или напрямую.
 
---

###  Правила приёма дипломной работы

Нужно предоставить файлы, содержащие следующую информацию:

1. Дамп структуры БД с данными.
2. Файл конфигурации параметров экземпляра БД.
3. Файлы для настройки СУБД postgresql.conf pg_hba.conf.
4. Команды выполнения резервного копирования.
5. Любая другая информация на ваше усмотрение, которая поможет корректно и полно оценить весь объём работы.

---

### Критерии оценки дипломной работы

1. Создана новая продуктивная БД.
2. Заведены необходимые пользователи и роли, которым выданы требующиеся для работы привилегии.
3. Произведена настройка безопасного соединения с СУБД.
4. Сконфигурирована процедура выполнения резервного копирования и репликации.
5. Выполнена настройка режима работы архивации журналов WAL.
6. Настроен необходимый уровень журналирования.

